<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Moonlight Mastery Challenge | The Sect Of Moonlight Knights</title>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500;600&family=Inter:wght@300;400&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700&family=Noto+Naskh+Arabic:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        :root {
            --midnight-blue: #0a0e17;
            --deep-space: #050a15;
            --stellar-blue: #0d1a30;
            --nebula-blue: #152642;
            --moon-glow: #e6e6fa;
            --star-light: #a8c0ff;
            --silver-mist: #d0d7e9;
            --celestial-blue: #4d79ff;
            --disabled-gray: #2a3040;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
            scroll-padding-top: 100px;
        }

        body {
            background: radial-gradient(ellipse at bottom, var(--deep-space) 0%, var(--midnight-blue) 70%, var(--stellar-blue) 100%);
            color: var(--silver-mist);
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            font-weight: 300;
            transition: font-family 0.3s ease;
        }
        
        /* Arabic language styling */
        body.arabic {
            font-family: 'Tajawal', sans-serif;
            direction: rtl;
        }
        
        body.arabic h1,
        body.arabic h2,
        body.arabic h3,
        body.arabic .headline,
        body.arabic .login-title,
        body.arabic .popup-title,
        body.arabic .section-title,
        body.arabic .nav-link,
        body.arabic .developer-credit,
        body.arabic .btn,
        body.arabic .signature {
            font-family: 'Tajawal', serif;
        }

        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 10% 20%, rgba(23, 45, 90, 0.15) 0px, transparent 1px),
                radial-gradient(circle at 90% 80%, rgba(23, 45, 90, 0.15) 0px, transparent 1px);
            background-size: 40px 40px;
            pointer-events: none;
            z-index: -1;
            opacity: 0.3;
        }

        /* Language switcher */
        .language-switcher {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 2000;
            background: rgba(10, 20, 35, 0.7);
            border: 1px solid rgba(100, 150, 255, 0.2);
            color: var(--moon-glow);
            border-radius: 4px;
            width: 40px;
            height: 40px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            backdrop-filter: blur(5px);
            transition: all 0.3s ease;
        }
        
        .language-switcher:hover {
            background: rgba(30, 60, 120, 0.5);
            transform: translateY(-2px);
        }

        /* Login Page Styles */
        #login-page {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: radial-gradient(ellipse at center, var(--deep-space) 0%, var(--midnight-blue) 70%, rgba(10, 25, 50, 0.9) 100%);
            z-index: 1000;
            transition: opacity 1s ease, transform 1s ease;
        }

        #login-page.hidden {
            opacity: 0;
            pointer-events: none;
            transform: translateY(-50px);
        }

        .login-container {
            background: rgba(10, 20, 35, 0.9);
            border: 1px solid rgba(100, 150, 255, 0.1);
            border-radius: 12px;
            padding: 2.5rem;
            max-width: 480px;
            width: 90%;
            text-align: center;
            box-shadow: 0 0 40px rgba(30, 70, 150, 0.2);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(8px);
            transform: translateY(0);
            transition: transform 0.5s ease;
        }

        .login-container:hover {
            transform: translateY(-5px);
        }

        .login-container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, transparent 0%, rgba(77, 121, 255, 0.08) 70%);
            z-index: -1;
            animation: rotate 20s linear infinite;
        }

        .login-title {
            font-family: 'Cormorant Garamond', serif;
            font-size: 2.2rem;
            margin-bottom: 1.2rem;
            color: var(--moon-glow);
            font-weight: 500;
            letter-spacing: 0.5px;
        }

        .login-subtitle {
            font-size: 1.05rem;
            margin-bottom: 1.8rem;
            opacity: 0.8;
            line-height: 1.6;
        }

        .login-form {
            display: flex;
            flex-direction: column;
            gap: 1.4rem;
        }

        .login-input {
            background: rgba(15, 30, 60, 0.3);
            border: 1px solid rgba(100, 150, 255, 0.15);
            border-radius: 8px;
            padding: 0.9rem;
            color: var(--moon-glow);
            font-size: 1rem;
            text-align: center;
            outline: none;
            transition: all 0.3s ease;
        }

        .login-input:focus {
            border-color: var(--celestial-blue);
            box-shadow: 0 0 12px rgba(77, 121, 255, 0.2);
        }

        .login-input::placeholder {
            color: rgba(180, 200, 255, 0.5);
        }

        .login-btn {
            background: linear-gradient(135deg, var(--nebula-blue), var(--celestial-blue));
            color: white;
            border: none;
            padding: 0.9rem;
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.1rem;
            font-weight: 500;
            letter-spacing: 0.5px;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .login-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(30, 70, 150, 0.3);
        }

        .login-btn::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -60%;
            width: 20px;
            height: 200%;
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(25deg);
            transition: all 0.6s;
        }

        .login-btn:hover::after {
            left: 120%;
        }

        .page {
            display: none;
            min-height: 100vh;
            padding: 1.8rem;
            max-width: 1200px;
            margin: 0 auto;
            animation: fadeIn 1.2s ease-out;
        }

        .active {
            display: block;
        }

        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .star {
            position: absolute;
            background-color: var(--star-light);
            border-radius: 50%;
            animation: twinkle var(--duration, 6s) infinite var(--delay, 0s);
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.2; }
            50% { opacity: 0.8; }
        }

        header {
            padding: 1.4rem 0;
            border-bottom: 1px solid rgba(100, 150, 255, 0.1);
            margin-bottom: 2.5rem;
            position: sticky;
            top: 0;
            background: rgba(5, 10, 20, 0.9);
            backdrop-filter: blur(10px);
            z-index: 100;
        }

        nav {
            display: flex;
            justify-content: center;
            gap: 2.8rem;
        }

        .nav-link {
            color: var(--silver-mist);
            text-decoration: none;
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.1rem;
            font-weight: 500;
            letter-spacing: 0.8px;
            position: relative;
            padding: 0.5rem 0;
            opacity: 0.8;
            transition: all 0.3s ease;
        }

        .nav-link:hover, .nav-link.active {
            opacity: 1;
            color: var(--moon-glow);
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 1px;
            background: var(--moon-glow);
            transition: width 0.3s ease;
        }

        .nav-link:hover::after, .nav-link.active::after {
            width: 100%;
        }

        h1, h2, h3 {
            font-family: 'Cormorant Garamond', serif;
            font-weight: 500;
            letter-spacing: 0.8px;
            color: var(--moon-glow);
        }

        /* Home Page */
        #home-page {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding-top: 4rem;
            min-height: 100vh;
        }

        .moon-container {
            position: relative;
            margin: 1.8rem 0;
        }

        .moon {
            width: 190px;
            height: 190px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, #f9f3ee, #d8d0e3, #a99bb9);
            box-shadow: 0 0 50px rgba(166, 180, 255, 0.4);
            position: relative;
            overflow: hidden;
            animation: float 6s ease-in-out infinite;
        }

        .moon::before {
            content: "";
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: radial-gradient(circle at 40% 40%, transparent, rgba(0, 0, 0, 0.2) 40%);
        }

        .moon-crater {
            position: absolute;
            background: rgba(169, 155, 185, 0.7);
            border-radius: 50%;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-18px); }
        }

        .headline {
            font-size: 2.8rem;
            margin: 1.8rem 0 1.2rem;
            line-height: 1.2;
            text-shadow: 0 0 12px rgba(180, 200, 255, 0.4);
            font-weight: 500;
            letter-spacing: 0.5px;
            animation: glow-pulse 4s infinite alternate;
        }

        @keyframes glow-pulse {
            0% { text-shadow: 0 0 8px rgba(180, 200, 255, 0.3); }
            100% { text-shadow: 0 0 20px rgba(180, 200, 255, 0.6); }
        }

        .intro {
            font-size: 1rem;
            max-width: 580px;
            margin: 0 auto 2.8rem;
            opacity: 0.85;
            line-height: 1.7;
        }

        .btn {
            background: transparent;
            color: var(--moon-glow);
            border: 1px solid var(--moon-glow);
            padding: 0.7rem 2.2rem;
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.1rem;
            font-weight: 500;
            letter-spacing: 0.8px;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: all 0.4s ease;
            margin-top: 1rem;
            border-radius: 6px;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(180, 200, 255, 0.15), transparent);
            transition: 0.5s;
        }

        .btn:hover {
            box-shadow: 0 0 18px rgba(166, 180, 255, 0.3);
            text-shadow: 0 0 8px rgba(200, 220, 255, 0.6);
        }

        .btn:hover::before {
            left: 100%;
        }

        /* Challenge Page */
        #challenge-page {
            padding-top: 1.8rem;
            min-height: 100vh;
        }

        .progress-container {
            background: rgba(10, 20, 35, 0.7);
            border: 1px solid rgba(100, 150, 255, 0.1);
            border-radius: 16px;
            padding: 1.8rem;
            margin-bottom: 2.5rem;
            box-shadow: 0 0 12px rgba(20, 50, 100, 0.2);
            position: relative;
            backdrop-filter: blur(4px);
            transition: transform 0.3s ease;
        }

        .progress-container:hover {
            transform: translateY(-3px);
        }

        .progress-title {
            text-align: center;
            margin-bottom: 1.2rem;
            font-size: 1.6rem;
        }

        .user-greeting {
            text-align: center;
            margin-bottom: 1rem;
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.1rem;
            color: var(--moon-glow);
            font-weight: 500;
        }

        .date-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .date-label {
            font-size: 0.95rem;
            opacity: 0.9;
        }

        .date-input {
            background: rgba(15, 30, 60, 0.3);
            border: 1px solid rgba(100, 150, 255, 0.15);
            border-radius: 6px;
            padding: 0.6rem;
            color: var(--moon-glow);
            font-size: 0.95rem;
            max-width: 160px;
            outline: none;
            box-shadow: none;
        }

        .date-input:focus {
            outline: none;
            box-shadow: 0 0 6px rgba(100, 150, 255, 0.3);
            border-color: var(--celestial-blue);
        }

        .set-date-btn {
            background: rgba(15, 30, 60, 0.4);
            color: var(--moon-glow);
            border: 1px solid rgba(100, 150, 255, 0.2);
            padding: 0.6rem 1.2rem;
            border-radius: 6px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .set-date-btn:hover {
            background: rgba(30, 60, 120, 0.4);
            border-color: var(--celestial-blue);
        }

        .progress-bar {
            height: 16px;
            background: rgba(15, 30, 60, 0.4);
            border-radius: 8px;
            overflow: hidden;
            position: relative;
            margin: 1rem 0;
            border: 1px solid rgba(100, 150, 255, 0.1);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--nebula-blue), var(--celestial-blue));
            width: 0%;
            border-radius: 8px;
            position: relative;
            transition: width 0.8s cubic-bezier(0.22, 0.61, 0.36, 1);
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.15), transparent);
            animation: progress-glow 2s infinite;
        }

        @keyframes progress-glow {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }

        .progress-text {
            text-align: center;
            font-size: 1rem;
            margin-top: 0.5rem;
            opacity: 0.8;
        }

        .challenge-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.4rem;
        }

        .day-card {
            background: rgba(10, 20, 35, 0.5);
            border: 1px solid rgba(100, 150, 255, 0.1);
            border-radius: 10px;
            padding: 1.4rem;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(4px);
        }

        .day-card.disabled {
            background: rgba(10, 15, 25, 0.4);
            opacity: 0.7;
            cursor: not-allowed;
        }

        .day-card.future {
            background: rgba(10, 15, 25, 0.4);
            opacity: 0.7;
        }
        
        .day-card.finished {
            opacity: 0.5;
            background: rgba(10, 15, 25, 0.3);
            cursor: default;
            pointer-events: none;
        }

        .day-card:hover:not(.disabled):not(.future):not(.finished) {
            transform: translateY(-4px);
            box-shadow: 0 8px 18px rgba(0, 0, 0, 0.25);
            border-color: rgba(100, 150, 255, 0.2);
        }

        .day-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, var(--nebula-blue), var(--celestial-blue));
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.4s ease;
        }

        .day-card:hover:not(.disabled):not(.future)::before {
            transform: scaleX(1);
        }

        .day-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .day-number {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.2rem;
            font-weight: 500;
            color: var(--moon-glow);
        }

        .day-date {
            font-size: 0.9rem;
            opacity: 0.8;
            font-style: italic;
            background: rgba(15, 30, 60, 0.3);
            padding: 0.2rem 0.5rem;
            border-radius: 12px;
        }

        .habit-name {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.3rem;
            font-weight: 500;
            margin-bottom: 0.9rem;
            color: var(--moon-glow);
        }

        .habit-desc {
            font-size: 0.92rem;
            opacity: 0.85;
            margin-bottom: 1.4rem;
            line-height: 1.6;
        }

        .checkbox-container {
            display: flex;
            justify-content: flex-end;
        }

        .day-checkbox {
            -webkit-appearance: none;
            appearance: none;
            width: 38px;
            height: 19px;
            background: rgba(15, 30, 60, 0.4);
            border-radius: 9px;
            position: relative;
            cursor: pointer;
            border: 1px solid rgba(100, 150, 255, 0.2);
        }

        .day-checkbox:disabled {
            background: var(--disabled-gray);
            cursor: not-allowed;
        }

        .day-checkbox:checked:not(:disabled) {
            background: linear-gradient(90deg, var(--nebula-blue), var(--celestial-blue));
        }

        .day-checkbox::before {
            content: '';
            position: absolute;
            width: 15px;
            height: 15px;
            border-radius: 50%;
            top: 1px;
            left: 2px;
            background: var(--silver-mist);
            transition: all 0.3s ease;
        }

        .day-checkbox:disabled::before {
            background: #5a637a;
        }

        .day-checkbox:checked:not(:disabled)::before {
            transform: translateX(18px);
            background: var(--moon-glow);
            box-shadow: 0 0 4px rgba(200, 220, 255, 0.6);
        }

        .finish-container {
            grid-column: 1 / -1;
            text-align: center;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid rgba(100, 150, 255, 0.1);
        }

.finish-btn {
    display: block;
    margin: 2rem auto;
    background: linear-gradient(135deg, #1e2b4f, #4a6edb, #89bfff);
    color: #f0f4ff;
    border: none;
    padding: 0.8rem 2.5rem;
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.1rem;
    font-weight: 500;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 18px rgba(70, 120, 200, 0.4);
    text-align: center;
}

.finish-btn:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 25px rgba(100, 150, 255, 0.5);
}
        
.new-challenge-btn {
    background: linear-gradient(135deg, #1f2b64, #3e5dff); /* أزرق كوني */
    color: white;
    border: none;
    padding: 0.8rem 2.5rem;
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.1rem;
    font-weight: 500;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(30, 60, 120, 0.4);
    display: none;
    margin: 0 auto;
}

.new-challenge-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 25px rgba(50, 80, 180, 0.5);
}
        /* About Page */
        #about-page {
            padding-top: 1.8rem;
            min-height: 100vh;
        }

        .about-content {
            max-width: 780px;
            margin: 0 auto;
        }

        .about-title {
            text-align: center;
            font-size: 2.2rem;
            margin-bottom: 2.5rem;
            position: relative;
            font-weight: 500;
        }

        .about-title::after {
            content: '';
            position: absolute;
            bottom: -12px;
            left: 50%;
            transform: translateX(-50%);
            width: 90px;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--moon-glow), transparent);
        }

        .about-section {
            margin-bottom: 2.5rem;
            background: rgba(10, 20, 35, 0.5);
            border: 1px solid rgba(100, 150, 255, 0.1);
            border-radius: 10px;
            padding: 1.8rem;
            box-shadow: 0 0 12px rgba(20, 50, 100, 0.15);
            backdrop-filter: blur(4px);
            transition: transform 0.3s ease;
        }
        
        .about-section:hover {
            transform: translateY(-3px);
        }

        .section-title {
            font-size: 1.6rem;
            margin-bottom: 1.3rem;
            color: var(--moon-glow);
            position: relative;
            padding-bottom: 0.5rem;
            font-weight: 500;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 55px;
            height: 2px;
            background: var(--moon-glow);
        }

        .about-text {
            font-size: 1.05rem;
            line-height: 1.7;
            margin-bottom: 1.3rem;
            opacity: 0.85;
        }

        .social-section {
            text-align: center;
            margin: 2.5rem 0;
        }

        .social-title {
            font-size: 1.6rem;
            margin-bottom: 1.3rem;
            color: var(--moon-glow);
            font-weight: 500;
        }

        .social-icons {
            display: flex;
            justify-content: center;
            gap: 1.8rem;
            flex-wrap: wrap;
        }

        .social-icon {
            color: var(--moon-glow);
            font-size: 1.8rem;
            transition: all 0.3s ease;
            text-decoration: none;
            opacity: 0.85;
        }

        .social-icon:hover {
            transform: translateY(-4px);
            color: #ffffff;
            text-shadow: 0 0 8px rgba(166, 180, 255, 0.6);
            opacity: 1;
        }

        .quote-container {
            padding: 1.8rem;
            border-left: 2px solid var(--moon-glow);
            background: rgba(15, 30, 60, 0.2);
            margin: 1.8rem 0;
            position: relative;
            transition: transform 0.3s ease;
        }
        
        .quote-container:hover {
            transform: translateY(-3px);
        }

        .quote-container::before {
            content: '"';
            position: absolute;
            top: -20px;
            left: 10px;
            font-size: 4.5rem;
            font-family: 'Cormorant Garamond', serif;
            color: rgba(180, 200, 255, 0.1);
        }

        .quote {
            font-style: italic;
            font-size: 1.2rem;
            line-height: 1.7;
            margin-bottom: 1rem;
            opacity: 0.9;
        }

        .signature {
            text-align: right;
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.3rem;
            color: var(--moon-glow);
            font-weight: 500;
        }

        .sigil {
            text-align: center;
            margin: 2.5rem 0;
        }

        .sigil-circle {
            display: inline-flex;
            justify-content: center;
            align-items: center;
            width: 160px;
            height: 160px;
            border: 1.5px solid var(--moon-glow);
            border-radius: 50%;
            position: relative;
            transition: transform 0.5s ease;
        }
        
        .sigil-circle:hover {
            transform: rotate(15deg);
        }

        .sigil-inner {
            width: 125px;
            height: 125px;
            border: 1px solid rgba(180, 200, 255, 0.25);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .sigil-icon {
            font-size: 1.2rem;
            color: var(--moon-glow);
            animation: rotate 15s linear infinite;
            opacity: 0.9;
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Completion Popup */
        #completion-popup {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background: rgba(5, 10, 20, 0.96);
            z-index: 2000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.8s ease;
        }

        #completion-popup.show {
            opacity: 1;
            pointer-events: all;
        }

        .popup-content {
            background: radial-gradient(ellipse at center, var(--midnight-blue) 0%, var(--deep-space) 100%);
            border: 1px solid rgba(100, 150, 255, 0.15);
            border-radius: 16px;
            padding: 2.5rem;
            max-width: 540px;
            width: 90%;
            text-align: center;
            box-shadow: 0 0 40px rgba(30, 70, 150, 0.3);
            position: relative;
            overflow: hidden;
            transform: scale(0.9);
            transition: transform 0.5s ease;
            backdrop-filter: blur(8px);
        }

        #completion-popup.show .popup-content {
            transform: scale(1);
        }

        .popup-content::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, transparent 0%, rgba(77, 121, 255, 0.08) 70%);
            z-index: -1;
            animation: rotate 15s linear infinite;
        }

        .popup-title {
            font-family: 'Cormorant Garamond', serif;
            font-size: 2.4rem;
            margin-bottom: 1.3rem;
            color: var(--moon-glow);
            text-shadow: 0 0 12px rgba(166, 180, 255, 0.5);
            font-weight: 500;
        }

        .popup-text {
            font-size: 1.1rem;
            margin-bottom: 1.8rem;
            line-height: 1.7;
            opacity: 0.9;
        }


@keyframes stellarGlow {
  0% {
    text-shadow:
      0 0 2px #a0c4ff,
      0 0 4px #72aaff,
      0 0 6px #4b88ff,
      0 0 10px #2a6eff;
  }
  25% {
    text-shadow:
      0 0 4px #b3d1ff,
      0 0 8px #80b7ff,
      0 0 12px #4d99ff,
      0 0 16px #266fff;
  }
  50% {
    text-shadow:
      0 0 6px #d0e4ff,
      0 0 12px #99ccff,
      0 0 18px #66aaff,
      0 0 24px #3388ff;
  }
  75% {
    text-shadow:
      0 0 4px #b3d1ff,
      0 0 8px #80b7ff,
      0 0 12px #4d99ff,
      0 0 16px #266fff;
  }
  100% {
    text-shadow:
      0 0 2px #a0c4ff,
      0 0 4px #72aaff,
      0 0 6px #4b88ff,
      0 0 10px #2a6eff;
  }
}

.user-name {
  color: #d0e4ff;
  font-weight: 450;
  font-size: 1.5rem;
  letter-spacing: 1.2px;
  animation: stellarGlow 2s ease-in-out infinite;
  text-transform: uppercase;
  font-family: 'Cormorant garamond', serif;
}

        .days-completed {
            font-size: 1.2rem;
            margin: 1.3rem 0;
            color: var(--moon-glow);
            font-weight: 500;
            letter-spacing: 0.5px;
        }

        .popup-btn {
            background: linear-gradient(135deg, var(--nebula-blue), var(--celestial-blue));
            color: white;
            border: none;
            padding: 0.8rem 1.8rem;
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.05rem;
            font-weight: 500;
            letter-spacing: 0.5px;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .popup-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 12px rgba(30, 70, 150, 0.3);
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 1.8rem;
            margin-top: 2.5rem;
            border-top: 1px solid rgba(100, 150, 255, 0.1);
            font-size: 0.95rem;
            opacity: 0.7;
        }

        .developer-credit {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.05rem;
            color: var(--moon-glow);
            font-weight: 500;
            letter-spacing: 0.5px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .headline {
                font-size: 2.2rem;
            }
            
            .challenge-grid {
                grid-template-columns: 1fr;
            }
            
            nav {
                gap: 1.4rem;
                flex-wrap: wrap;
            }
            
            .moon {
                width: 160px;
                height: 160px;
            }
            
            .login-container {
                padding: 2rem 1.5rem;
            }
            
            .popup-content {
                padding: 2rem 1.5rem;
            }
            
            .popup-title {
                font-size: 2rem;
            }
            
            .about-title {
                font-size: 2rem;
            }
            
            .section-title {
                font-size: 1.5rem;
            }
            
            .date-controls {
                flex-direction: column;
                gap: 0.8rem;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            background: rgba(10, 20, 35, 0.9);
            border: 1px solid rgba(100, 150, 255, 0.2);
            border-radius: 8px;
            color: var(--moon-glow);
            font-size: 0.95rem;
            transform: translateX(150%);
            transition: transform 0.4s ease;
            z-index: 3000;
            backdrop-filter: blur(5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification.error {
            border-left: 4px solid #ff4d4d;
        }
        
        .notification.success {
            border-left: 4px solid #4dffa6;
        }
        
        /* Night Completion Popup */
        #night-completion-popup {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background: rgba(5, 10, 20, 0.85);
            z-index: 2500;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.6s ease;
        }
        
        #night-completion-popup.show {
            opacity: 1;
            pointer-events: all;
        }
        
        .night-popup-content {
            background: radial-gradient(ellipse at center, var(--midnight-blue) 0%, rgba(8, 18, 40, 0.9) 100%);
            border: 1px solid rgba(100, 150, 255, 0.2);
            border-radius: 16px;
            padding: 2.5rem;
            max-width: 480px;
            width: 90%;
            text-align: center;
            box-shadow: 0 0 50px rgba(100, 150, 255, 0.2);
            position: relative;
            overflow: hidden;
            transform: scale(0.95);
            transition: transform 0.5s ease;
            backdrop-filter: blur(10px);
        }
        
        #night-completion-popup.show .night-popup-content {
            transform: scale(1);
        }
        
        .night-popup-content::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, transparent 0%, rgba(77, 121, 255, 0.12) 70%);
            z-index: -1;
            animation: rotate 20s linear infinite;
        }
        
        .night-popup-title {
            font-family: 'Cormorant Garamond', serif;
            font-size: 2.2rem;
            margin-bottom: 1.3rem;
            color: var(--moon-glow);
            font-weight: 500;
            letter-spacing: 0.5px;
            text-shadow: 0 0 15px rgba(166, 180, 255, 0.7);
        }
        
        .night-popup-text {
            font-size: 1.2rem;
            margin-bottom: 1.8rem;
            line-height: 1.6;
            opacity: 0.9;
            color: var(--silver-mist);
        }
        
        .night-continue-btn {
            background: linear-gradient(135deg, var(--nebula-blue), var(--celestial-blue));
            color: white;
            border: none;
            padding: 0.8rem 2rem;
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.1rem;
            font-weight: 500;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(30, 60, 120, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .night-continue-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(30, 70, 150, 0.4);
        }
        
        .night-continue-btn::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -60%;
            width: 20px;
            height: 200%;
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(25deg);
            transition: all 0.6s;
        }
        
        .night-continue-btn:hover::after {
            left: 120%;
        }
        
        /* Night Popup Stars */
        .night-stars {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }
        
        .night-star {
            position: absolute;
            background-color: var(--star-light);
            border-radius: 50%;
            animation: night-twinkle var(--duration, 8s) infinite var(--delay, 0s);
        }
        
        @keyframes night-twinkle {
            0%, 100% { opacity: 0.1; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.2); }
        }
        
        /* Confirmation Modal */
        #confirmation-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background: rgba(5, 10, 20, 0.92);
            z-index: 2500;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.6s ease;
        }
        
        #confirmation-modal.show {
            opacity: 1;
            pointer-events: all;
        }
        
        .confirmation-content {
            background: radial-gradient(ellipse at center, var(--midnight-blue) 0%, rgba(8, 18, 40, 0.95) 100%);
            border: 1px solid rgba(100, 150, 255, 0.2);
            border-radius: 16px;
            padding: 2.5rem;
            max-width: 500px;
            width: 90%;
            text-align: center;
            box-shadow: 0 0 40px rgba(30, 70, 150, 0.25);
            position: relative;
            overflow: hidden;
            transform: scale(0.95);
            transition: transform 0.5s ease;
            backdrop-filter: blur(8px);
        }
        
        #confirmation-modal.show .confirmation-content {
            transform: scale(1);
        }
        
        .confirmation-title {
            font-family: 'Cormorant Garamond', serif;
            font-size: 2rem;
            margin-bottom: 1.3rem;
            color: var(--moon-glow);
            font-weight: 500;
        }
        
        .confirmation-text {
            font-size: 1.1rem;
            margin-bottom: 2rem;
            line-height: 1.7;
            opacity: 0.9;
        }
        
        .confirmation-buttons {
            display: flex;
            justify-content: center;
            gap: 1.2rem;
            flex-wrap: wrap;
        }
        
        .confirm-btn {
            background: linear-gradient(135deg, var(--nebula-blue), var(--celestial-blue));
            color: white;
            border: none;
            padding: 0.7rem 1.8rem;
            font-family: 'Cormorant Garamond', serif;
            font-size: 1rem;
            font-weight: 500;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .confirm-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 12px rgba(30, 70, 150, 0.3);
        }
        
        .cancel-btn {
            background: transparent;
            color: var(--moon-glow);
            border: 1px solid var(--moon-glow);
            padding: 0.7rem 1.8rem;
            font-family: 'Cormorant Garamond', serif;
            font-size: 1rem;
            font-weight: 500;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .cancel-btn:hover {
            background: rgba(100, 150, 255, 0.1);
        }
        
        /* Scroll to top button */
        .scroll-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            background: rgba(10, 20, 35, 0.7);
            border: 1px solid rgba(100, 150, 255, 0.2);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.3s ease;
            z-index: 99;
        }
        
        .scroll-top.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        .scroll-top i {
            color: var(--moon-glow);
            font-size: 1.2rem;
        }
    </style>
</head>
<body>
    <!-- Language switcher button -->
    <button id="language-switcher" class="language-switcher">EN</button>
    
    <!-- Login Page -->
    <div id="login-page">
        <div class="login-container">
            <h2 class="login-title" data-key="loginTitle">Moonlight Mastery</h2>
            <p class="login-subtitle" data-key="loginSubtitle">Enter your name to begin your journey under the moon</p>
            <form class="login-form" id="login-form">
                <input type="text" class="login-input" id="username" placeholder="Enter your name" data-key="usernamePlaceholder" required>
                <button type="submit" class="login-btn" data-key="loginButton">Begin Transformation</button>
            </form>
        </div>
    </div>
    
    <!-- Notification -->
    <div class="notification" id="notification"></div>
    
    <!-- Star background -->
    <div class="stars" id="stars"></div>
    
    <!-- Scroll to top button -->
    <div class="scroll-top" id="scroll-top">
        <i class="fas fa-arrow-up"></i>
    </div>
    
    <header>
        <nav>
            <a href="#" class="nav-link active" data-page="home" data-key="navHome">Our Plan</a>
            <a href="#" class="nav-link" data-page="challenge" data-key="navChallenge">Nights</a>
            <a href="#" class="nav-link" data-page="about" data-key="navAbout">About</a>
        </nav>
    </header>
    
    <!-- Home Page -->
    <div id="home-page" class="page">
        <div class="moon-container">
            <div class="moon" id="moon"></div>
        </div>
        <h1 class="headline" data-key="headline">30 Nights. 1 Person.</h1>
        <p class="intro" data-key="intro">
            Under the same moon, with the same habits, for 30 nights.
            #30NightBeyonder
        </p>
        <button class="btn" id="begin-btn" data-key="beginButton">Begin the Challenge</button>
    </div>
    
    <!-- Challenge Page -->
    <div id="challenge-page" class="page">
        <div class="progress-container">
            <h2 class="progress-title" data-key="progressTitle">Your Progress</h2>
            <div class="user-greeting" data-key="userGreeting">Welcome, <span id="user-name-display">Traveler</span></div>
            
            <div class="date-controls">
                <span class="date-label" data-key="dateLabel">Set Challenge Start Date:</span>
                <input type="date" id="start-date" class="date-input">
                <button id="set-date-btn" class="set-date-btn" data-key="setDateButton">Set Date</button>
            </div>
            
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            <div class="progress-text" data-key="progressText">Night <span id="current-night">0</span> of 30 - <span id="completion-text">Keep Pushing</span></div>
        </div>
        
        <div class="challenge-grid" id="challenge-grid">
            <!-- Days will be generated by JavaScript -->
        </div>
        
        <div class="finish-container">
            <button class="finish-btn" id="finish-challenge-btn" data-key="finishButton">Finish Challenge</button>
            <button class="new-challenge-btn" id="new-challenge-btn" data-key="newChallengeButton">Start New Challenge</button>
        </div>
    </div>
    
    <!-- About Page -->
    <div id="about-page" class="page">
        <div class="about-content">
            <h2 class="about-title" data-key="aboutTitle">The Sect Of Moonlight Knights</h2>
            
            <div class="about-section">
                <h3 class="section-title" data-key="challengeTitle">The Challenge</h3>
                <p class="about-text" data-key="challengeText1">
No drama. No fireworks.
Just a decision.
Thirty nights.
To show up.
To reclaim control.
                </p>
                <p class="about-text" data-key="challengeText2">
One night at a time,
we become colder…
stronger…
clearer.
                </p>
                <p class="about-text" data-key="challengeText3">
The moon doesn’t ask for attention.
It just rises.
So will you.
                </p>
                <p class="about-text" data-key="challengeSignature">
                    -Moaz
                </p>
            </div>
            
            <div class="about-section">
                <h3 class="section-title" data-key="journeyTitle">Our Journey</h3>
                <p class="about-text" data-key="journeyText1">
                    A journey of cold winds and certainty,
A lone travelers experience a life of ups and downs.
A heart of steel forged from countless setbacks,
A lifetime of effort to forge one sword.
                </p>
                <p class="about-text" data-key="journeySignature">
                    -Fang yuan
                </p>
            </div>
            
            <div class="social-section">
                <h3 class="social-title" data-key="socialTitle">Connect With The Sect</h3>
                <div class="social-icons">
                    <a href="https://youtube.com/@moaz-nouh?si=Jnj73QTmd8io9eCU" class="social-icon"><i class="fab fa-youtube"></i></a>
                    <a href="https://t.me/BeyonderSect" class="social-icon"><i class="fab fa-telegram"></i></a>
                    <a href="https://www.instagram.com/moaz_nouh?igsh=aTFvcXVlZWdsaXM1" class="social-icon"><i class="fab fa-instagram"></i></a>
                    <a href="https://x.com/moazless?s=09" class="social-icon"><i class="fab fa-x-twitter"></i></a>
                    <a href="#" class="social-icon"><i class="fab fa-tiktok"></i></a>
                    <a href="#" class="social-icon"><i class="fab fa-facebook"></i></a>
                </div>
            </div>
            
            <div class="quote-container">
                <p class="quote" data-key="quote">
"The higher you rise, The fewer voices you hear—— But the stronger they become. "
                </p>
                <p class="signature" data-key="quoteSignature">— Beyonder, The Commander</p>
            </div>
            
            <div class="sigil">
                <div class="sigil-circle">
                    <div class="sigil-inner">
                        <div class="sigil-icon">(✧‿⁠◕⁠)</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Completion Popup -->
    <div id="completion-popup">
        <div class="popup-content">
            <h2 class="popup-title">Mastery Achieved!</h2>
            <p class="popup-text">Congratulations, <span class="user-name" id="popup-user-name">Knight</span>!</p>
            <p class="popup-text">You have completed the first journey of the Moonlight Knights.</p>
            <div class="days-completed"><span id="completed-days-count">0</span> Nights of Transformation Completed</div>
            <p class="popup-text">Your Perseverance has earned you a place with the Beyonders.</p>
            <button class="popup-btn" id="popup-close">Continue Your Journey</button>
        </div>
    </div>
    
    
    <!-- Night Completion Popup -->
    <div id="night-completion-popup">
        <div class="night-stars" id="night-stars"></div>
        <div class="night-popup-content">
            <h2 class="night-popup-title">Night <span id="completed-night-number">1</span> Conquered</h2>
            <p class="night-popup-text">The moonlight grows stronger.</p>
            <button class="night-continue-btn" id="night-popup-close">Continue</button>
        </div>
    </div>
    
    <!-- Confirmation Modal -->
    <div id="confirmation-modal">
        <div class="confirmation-content">
            <h2 class="confirmation-title" data-key="confirmationTitle">End Challenge?</h2>
            <p class="confirmation-text" data-key="confirmationText">Are you sure you want to end the challenge? All progress will be frozen until you start a new challenge.</p>
            <div class="confirmation-buttons">
                <button class="confirm-btn" id="confirm-finish" data-key="confirmButton">Yes, End Challenge</button>
                <button class="cancel-btn" id="cancel-finish" data-key="cancelButton">Cancel</button>
            </div>
        </div>
    </div>
    
    <!-- Footer -->
    <footer>
        <div class="developer-credit" data-key="developerCredit">Developed by Moaz</div>
    </footer>
    
    <script>
        // Translation object
        const translations = {
            en: {
                loginTitle: "Moonlight Mastery",
                loginSubtitle: "Enter your name to begin your journey under the moon",
                usernamePlaceholder: "Enter your name",
                loginButton: "Begin Transformation",
                navHome: "Our Plan",
                navChallenge: "Nights",
                navAbout: "About",
                headline: "30 Nights. 1 Person.",
                intro: "Under the same moon, with the same habits, for 30 nights... #30NightBeyonder",
                beginButton: "Begin the Challenge",
                progressTitle: "Your Progress",
                userGreeting: "Welcome,",
                dateLabel: "Set Challenge Start Date:",
                setDateButton: "Set Date",
                progressText: "Night {0} of 30 - {1}",
                finishButton: "Finish Challenge",
                newChallengeButton: "Start New Challenge",
                aboutTitle: "The Sect Of Moonlight Knights",
                challengeTitle: "The Challenge",
                challengeText1: "No drama. No fireworks.\nJust a decision.\nThirty nights.\nTo show up.\nTo reclaim control.",
                challengeText2: "One night at a time,\nwe become colder…\nstronger…\nclearer.",
                challengeText3: "The moon doesn’t ask for attention.\nIt just rises.\nSo will you.",
                challengeSignature: "-Moaz",
                journeyTitle: "Our Journey",
                journeyText1: "A journey of cold winds and certainty,\nA lone travelers experience a life of ups and downs.\nA heart of steel forged from countless setbacks,\nA lifetime of effort to forge one sword.",
                journeySignature: "-Fang yuan",
                socialTitle: "Connect With The Sect",
                quote: "\"The higher you rise, The fewer voices you hear—— But the stronger they become.\"",
                quoteSignature: "— Beyonder, The Commander",
                developerCredit: "Developed by Moaz",
                popupTitle: "Mastery Achieved!",
                popupText1: "Congratulations,",
                popupText2: "You have completed the first journey of the Moonlight Knights.",
                daysCompleted: "{0} Nights of Transformation Completed",
                popupText3: "Your Perseverance has earned you a place with the Beyonders.",
                popupButton: "Continue Your Journey",
                nightPopupTitle: "Night {0} Conquered",
                nightPopupText: "The moonlight grows stronger.",
                nightPopupButton: "Continue",
                confirmationTitle: "End Challenge?",
                confirmationText: "Are you sure you want to end the challenge? All progress will be frozen until you start a new challenge.",
                confirmButton: "Yes, End Challenge",
                cancelButton: "Cancel",
                progressMessages: [
                    "Keep Pushing",
                    "New Moon Phase",
                    "Waxing Crescent",
                    "First Quarter",
                    "Waxing Gibbous",
                    "Full Moon Approaches",
                    "Mastery Achieved!"
                ],
                challengeData: [
                    { day: 1, name: "Light the Flame", desc: "Ignite your commitment under the new moon" },
                    { day: 2, name: "Silence of Mind", desc: "Cultivate inner stillness for one full hour" },
                    { day: 3, name: "Shadow's Resolve", desc: "Confront one avoidance you've been neglecting" },
                    { day: 4, name: "Lunar Alignment", desc: "Align your sleep with moon's rhythm" },
                    { day: 5, name: "Celestial Hydration", desc: "Drink only water under moon's guidance" },
                    { day: 6, name: "Starlight Reflection", desc: "Journal under the night sky" },
                    { day: 7, name: "Waxing Focus", desc: "Deep work without distraction" },
                    { day: 8, name: "Veil of Discipline", desc: "Complete tasks before midnight" },
                    { day: 9, name: "Crescent Stretch", desc: "Reach beyond your perceived limits" },
                    { day: 10, name: "Midnight Clarity", desc: "Meditate at the darkest hour" },
                    { day: 11, name: "Orb of Stillness", desc: "Digital sunset 2 hours before sleep" },
                    { day: 12, name: "Phase Transition", desc: "Transform a bad habit consciously" },
                    { day: 13, name: "Gibbous Growth", desc: "Learn one new moon-related skill" },
                    { day: 14, name: "Luminary Reading", desc: "Read wisdom under moonlight" },
                    { day: 15, name: "Full Moon Revelation", desc: "Confront your deepest truth tonight" },
                    { day: 16, name: "Tide's Turning", desc: "Express gratitude for life's ebbs and flows" },
                    { day: 17, name: "Waning Release", desc: "Let go of one unnecessary possession" },
                    { day: 18, name: "Crater Contemplation", desc: "Reflect on perceived imperfections" },
                    { day: 19, name: "Astral Projection", desc: "Visualize your highest self" },
                    { day: 20, name: "Cosmic Connection", desc: "Strengthen an important relationship" },
                    { day: 21, name: "Nebula Nourishment", desc: "Consume only pure, natural foods" },
                    { day: 22, name: "Galactic Grounding", desc: "Barefoot connection with earth at night" },
                    { day: 23, name: "Eclipse Insight", desc: "Seek wisdom in shadowed moments" },
                    { day: 24, name: "Constellation Creation", desc: "Map your future path" },
                    { day: 25, name: "Eventide Examination", desc: "Review progress with ruthless honesty" },
                    { day: 26, name: "Penumbra Persistence", desc: "Continue when motivation fades" },
                    { day: 27, name: "Twilight Transformation", desc: "Embody your new self fully" },
                    { day: 28, name: "Aurora Anticipation", desc: "Prepare for life beyond the challenge" },
                    { day: 29, name: "Zenith Integration", desc: "Synthesize all lessons learned" },
                    { day: 30, name: "Eternal Illumination", desc: "Become the master of your moonlight" }
                ]
            },
            ar: {
                loginTitle: "إتقان ضوء القمر",
                loginSubtitle: "أدخل اسمك لتبدأ رحلتك تحت القمر",
                usernamePlaceholder: "أدخل اسمك",
                loginButton: "ابدأ التحول",
                navHome: "الخطة",
                navChallenge: "الليالي",
                navAbout: "نبذه",
                headline: "30 ليلة. شخص واحد.",
                intro: "تحت نفس القمر، بنفس العادات، لمدة 30 ليلة. #30NightBeyonder",
                beginButton: "ابدأ التحدي",
                progressTitle: "تقدمك",
                userGreeting: "أهلاً بك،",
                dateLabel: "تعيين تاريخ بدء التحدي:",
                setDateButton: "تعيين التاريخ",
                progressText: "الليلة {0} من 30 - {1}",
                finishButton: "إنهاء التحدي",
                newChallengeButton: "بدء تحدي جديد",
                aboutTitle: "طائفة فرسان ضوء القمر",
                challengeTitle: " التحدي الحالي",
                challengeText1: "لا دراما. لا أضواء.\nمجرد قرار.\nثلاثين ليلة.\nلتظهر.\nلاستعادة السيطرة.",
                challengeText2: "ليلة بعد ليلة،\nنصبح أكثر برودة...\nأقوى...\nأوضح.",
                challengeText3: "القمر لا يطلب الاهتمام.\nإنه يرتفع فقط.\nوهكذا ستفعل أنت.",
                challengeSignature: "-معاذ",
                journeyTitle: "رحلتنا",
                journeyText1: "رحلة من الرياح الباردة واليقين،\nتجربة مسافر وحيد لحياة من الصعود والهبوط.\nقلب من الفولاذ تشكل من انتكاسات لا حصر لها،\nجهد عمر لصقل سيف واحد.",
                journeySignature: "-فانغ يوان",
                socialTitle: "تواصل مع الطائفة",
                quote: "\"كلما ارتفعت، قل عدد الأصوات التي تسمعها—— لكنها أصبحت أقوى.\"",
                quoteSignature: "—القائد",
                developerCredit: "Developed by Moaz",
                popupTitle: "تم تحقيق الإتقان!",
                popupText1: "تهانينا،",
                popupText2: "لقد أكملت الرحلة المقدسة لفرسان ضوء القمر.",
                daysCompleted: "تم إكمال {0} ليالي التحول",
                popupText3: "لقد أكسبك تفانيك مكاناً بين المستنيرين.",
                popupButton: "استمر في رحلتك",
                nightPopupTitle: "تم تخطي الليلة {0}",
                nightPopupText: "ضوء القمر يزداد قوة.",
                nightPopupButton: "استمر",
                confirmationTitle: "إنهاء التحدي؟",
                confirmationText: "هل أنت متأكد أنك تريد إنهاء التحدي؟ سيتم تجميد كل التقدم حتى تبدأ تحديًا جديدًا.",
                confirmButton: "نعم، إنهاء التحدي",
                cancelButton: "إلغاء",
                progressMessages: [
                    "استمر في الدفع",
                    "مرحلة القمر الجديد",
                    "الهلال المتزايد",
                    "الربع الأول",
                    "الأحدب المتزايد",
                    "يقترب اكتمال القمر",
                    "تم تحقيق الإتقان!"
                ],
                challengeData: [
                    { day: 1, name: "أشعل الشعلة", desc: "أشعل التزامك تحت القمر الجديد" },
                    { day: 2, name: "صمت العقل", desc: "عزز الهدوء الداخلي لمدة ساعة كاملة" },
                    { day: 3, name: "عزيمة الظل", desc: "واجه أحد التجاهلات التي كنت تتجنبها" },
                    { day: 4, name: "محاذاة القمر", desc: "حاذي نومك مع إيقاع القمر" },
                    { day: 5, name: "ترطيب سماوي", desc: "اشرب الماء فقط تحت توجيه القمر" },
                    { day: 6, name: "انعكاس ضوء النجوم", desc: "دوّن يومياتك تحت سماء الليل" },
                    { day: 7, name: "تركيز متزايد", desc: "عمل عميق بدون تشتيت" },
                    { day: 8, name: "حجاب الانضباط", desc: "أكمل المهام قبل منتصف الليل" },
                    { day: 9, name: "تمدد الهلال", desc: "امتد إلى ما بعد حدودك المتصورة" },
                    { day: 10, name: "وضوح منتصف الليل", desc: "تأمل في أظلم ساعة" },
                    { day: 11, name: "دائرة السكون", desc: "غروب رقمي قبل النوم بساعتين" },
                    { day: 12, name: "تحول الطور", desc: "حوّل عادة سيئة بوعي" },
                    { day: 13, name: "نمو الأحدب", desc: "تعلم مهارة جديدة متعلقة بالقمر" },
                    { day: 14, name: "قراءة ضوئية", desc: "اقرأ الحكمة تحت ضوء القمر" },
                    { day: 15, name: "وحي البدر", desc: "واجه أعمق حقيقة لك الليلة" },
                    { day: 16, name: "تحول المد", desc: "عبّر عن الامتنان لصعود وهبوط الحياة" },
                    { day: 17, name: "تحرير متضائل", desc: "تخلى عن ملكية غير ضرورية" },
                    { day: 18, name: "تأمل الحفرة", desc: "تأمل في العيوب المتصورة" },
                    { day: 19, name: "إسقاط فلكي", desc: "تصور أعلى نسخة من نفسك" },
                    { day: 20, name: "اتصال كوني", desc: "قوِ علاقة مهمة" },
                    { day: 21, name: "تغذية السديم", desc: "استهلك أطعمة طبيعية نقية فقط" },
                    { day: 22, name: "التأريض المجري", desc: "اتصال حافي القدمين بالأرض في الليل" },
                    { day: 23, name: "بصيرة الكسوف", desc: "ابحث عن الحكمة في اللحظات المظللة" },
                    { day: 24, name: "خلق كوكبة", desc: "ارسم مسارك المستقبلي" },
                    { day: 25, name: "فحص المساء", desc: "راجع التقدم بصرامة" },
                    { day: 26, name: "ثبات الظل", desc: "استمر عندما يختفي الدافع" },
                    { day: 27, name: "تحول الشفق", desc: "تجسد نفسك الجديدة بالكامل" },
                    { day: 28, name: "ترقب الفجر القطبي", desc: "استعد للحياة بعد التحدي" },
                    { day: 29, name: "تكامل الذروة", desc: "اجمع كل الدروس المستفادة" },
                    { day: 30, name: "إضاءة أبدية", desc: "كن سيد ضوء قمرك" }
                ]
            }
        };

        // Current language
        let currentLanguage = localStorage.getItem('language') || 'en';
        
        // Notification system
        function showNotification(message, type) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = 'notification';
            notification.classList.add(type, 'show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 1000);
        }
        
        // Login functionality
        const loginPage = document.getElementById('login-page');
        const loginForm = document.getElementById('login-form');
        const usernameInput = document.getElementById('username');
        const userNameDisplay = document.getElementById('user-name-display');
        const popupUserName = document.getElementById('popup-user-name');
        
        // Check if user is already logged in
        const storedUsername = localStorage.getItem('moonlightUsername');
        if (storedUsername) {
            loginPage.classList.add('hidden');
            userNameDisplay.textContent = storedUsername;
            popupUserName.textContent = storedUsername;
        }
        
        // Handle login form submission
        loginForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const username = usernameInput.value.trim();
            if (username) {
                localStorage.setItem('moonlightUsername', username);
                userNameDisplay.textContent = username;
                popupUserName.textContent = username;
                
                // Hide login page with animation
                loginPage.classList.add('hidden');
                
                // Show home page
                document.getElementById('home-page').classList.add('active');
            }
        });
        
        // Create stars
        const starsContainer = document.getElementById('stars');
        for (let i = 0; i < 150; i++) {
            const star = document.createElement('div');
            star.classList.add('star');
            star.style.width = `${Math.random() * 1.5 + 1}px`;
            star.style.height = star.style.width;
            star.style.left = `${Math.random() * 100}%`;
            star.style.top = `${Math.random() * 100}%`;
            star.style.opacity = Math.random() * 0.6 + 0.1;
            star.style.setProperty('--duration', `${Math.random() * 4 + 4}s`);
            star.style.setProperty('--delay', `${Math.random() * 5}s`);
            starsContainer.appendChild(star);
        }
        
        // Create moon craters
        const moon = document.getElementById('moon');
        for (let i = 0; i < 10; i++) {
            const crater = document.createElement('div');
            crater.classList.add('moon-crater');
            const size = Math.random() * 20 + 8;
            crater.style.width = `${size}px`;
            crater.style.height = `${size}px`;
            crater.style.top = `${Math.random() * 80 + 10}%`;
            crater.style.left = `${Math.random() * 80 + 10}%`;
            moon.appendChild(crater);
        }
        
        // Navigation
        const navLinks = document.querySelectorAll('.nav-link');
        const pages = document.querySelectorAll('.page');
        
        navLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const targetPage = this.getAttribute('data-page');
                
                navLinks.forEach(l => l.classList.remove('active'));
                this.classList.add('active');
                
                pages.forEach(page => {
                    page.classList.remove('active');
                    if (page.id === `${targetPage}-page`) {
                        setTimeout(() => page.classList.add('active'), 10);
                    }
                });
                
                // Scroll to top
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
        });
        
        document.getElementById('begin-btn').addEventListener('click', function() {
            navLinks.forEach(l => l.classList.remove('active'));
            document.querySelector('[data-page="challenge"]').classList.add('active');
            
            pages.forEach(page => {
                page.classList.remove('active');
                if (page.id === 'challenge-page') {
                    setTimeout(() => page.classList.add('active'), 10);
                }
            });
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
        
        // Challenge data
        let challengeData = translations[currentLanguage].challengeData;
        
        const challengeGrid = document.getElementById('challenge-grid');
        const progressFill = document.getElementById('progress-fill');
        const currentNight = document.getElementById('current-night');
        const completionText = document.getElementById('completion-text');
        const completionPopup = document.getElementById('completion-popup');
        const completedDaysCount = document.getElementById('completed-days-count');
        const finishBtn = document.getElementById('finish-challenge-btn');
        const newChallengeBtn = document.getElementById('new-challenge-btn');
        const dateInput = document.getElementById('start-date');
        const setDateBtn = document.getElementById('set-date-btn');
        
        // Night completion popup elements
        const nightPopup = document.getElementById('night-completion-popup');
        const completedNightNumber = document.getElementById('completed-night-number');
        const nightPopupClose = document.getElementById('night-popup-close');
        
        // Confirmation modal elements
        const confirmationModal = document.getElementById('confirmation-modal');
        const confirmFinishBtn = document.getElementById('confirm-finish');
        const cancelFinishBtn = document.getElementById('cancel-finish');
        
        // Scroll to top button
        const scrollTopBtn = document.getElementById('scroll-top');
        
        // Set default start date to today
        const today = new Date();
        dateInput.valueAsDate = today;
        
        // Load start date from localStorage if available
        const storedStartDate = localStorage.getItem('challengeStartDate');
        if (storedStartDate) {
            dateInput.value = storedStartDate;
        }
        
        // Set date button functionality
        setDateBtn.addEventListener('click', function() {
            if (dateInput.value) {
                localStorage.setItem('challengeStartDate', dateInput.value);
                updateChallengeDates();
                updateDayCardsState();
                showNotification(translations[currentLanguage].setDateButton + " " + translations[currentLanguage].successNotification, "success");
            } else {
                showNotification(translations[currentLanguage].errorNotification, "error");
            }
        });
        
        // Load progress from localStorage
        let progress = JSON.parse(localStorage.getItem('moonlightProgress')) || Array(30).fill(false);
        
        // Format date to display (e.g., "Aug 1")
        function formatDate(date) {
            return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
        }
        
        // Update challenge dates based on start date
        function updateChallengeDates() {
            const startDate = new Date(dateInput.value);
            
            // Update all day cards with dates
            const dayCards = document.querySelectorAll('.day-card');
            dayCards.forEach((card, index) => {
                const dateElement = card.querySelector('.day-date');
                if (dateElement) {
                    const dayDate = new Date(startDate);
                    dayDate.setDate(startDate.getDate() + index);
                    dateElement.textContent = formatDate(dayDate);
                }
            });
        }
        
        // Update day cards state (enabled/disabled based on date)
        function updateDayCardsState() {
            const startDateValue = localStorage.getItem('challengeStartDate');
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            if (!startDateValue) {
                // Disable all cards if no date is set
                document.querySelectorAll('.day-card').forEach(card => {
                    card.classList.add('disabled');
                    const checkbox = card.querySelector('.day-checkbox');
                    if (checkbox) {
                        checkbox.disabled = true;
                    }
                });
                return;
            }
            
            const startDate = new Date(startDateValue);
            startDate.setHours(0, 0, 0, 0);
            
            document.querySelectorAll('.day-card').forEach((card, index) => {
                const dayDate = new Date(startDate);
                dayDate.setDate(startDate.getDate() + index);
                dayDate.setHours(0, 0, 0, 0);
                
                const checkbox = card.querySelector('.day-checkbox');
                if (!checkbox) return;
                
                // Reset card classes
                card.classList.remove('disabled', 'future', 'finished');
                
                if (dayDate > today) {
                    // Future day - disable and style differently
                    card.classList.add('future');
                    checkbox.disabled = true;
                    checkbox.checked = false;
                    progress[index] = false;
                } else {
                    // Past or current day - enable
                    checkbox.disabled = false;
                    card.classList.remove('disabled');
                }
            });
            
            // Update progress after potentially unchecking future days
            updateProgress();
        }
        
        // Generate challenge days
        function generateChallengeDays() {
            challengeGrid.innerHTML = '';
            challengeData = translations[currentLanguage].challengeData;
            
            challengeData.forEach((challenge, index) => {
                const dayCard = document.createElement('div');
                dayCard.className = 'day-card disabled'; // Start disabled until date is set
                
                // Calculate date for this day
                const startDate = new Date(dateInput.value);
                const dayDate = new Date(startDate);
                dayDate.setDate(startDate.getDate() + index);
                
                dayCard.innerHTML = `
                    <div class="day-header">
                        <div class="day-number">${translations[currentLanguage].nightLabel} ${challenge.day} <span class="day-date">${formatDate(dayDate)}</span></div>
                    </div>
                    <h3 class="habit-name">${challenge.name}</h3>
                    <p class="habit-desc">${challenge.desc}</p>
                    <div class="checkbox-container">
                        <input type="checkbox" class="day-checkbox" id="day-${challenge.day}" data-day="${index}" ${progress[index] ? 'checked' : ''} disabled>
                    </div>
                `;
                challengeGrid.appendChild(dayCard);
            });
            
            // Update card state after generating
            updateDayCardsState();
        }
        
        // Update progress bar
        function updateProgress() {
            const completed = progress.filter(Boolean).length;
            const percentage = (completed / 30) * 100;
            
            progressFill.style.width = `${percentage}%`;
            currentNight.textContent = completed;
            
            // Update completion text based on progress
            let progressText = '';
            if (completed === 0) {
                progressText = translations[currentLanguage].progressMessages[0];
            } else if (completed < 10) {
                progressText = translations[currentLanguage].progressMessages[1];
            } else if (completed < 20) {
                progressText = translations[currentLanguage].progressMessages[2];
            } else if (completed < 25) {
                progressText = translations[currentLanguage].progressMessages[3];
            } else if (completed < 28) {
                progressText = translations[currentLanguage].progressMessages[4];
            } else if (completed < 30) {
                progressText = translations[currentLanguage].progressMessages[5];
            } else {
                progressText = translations[currentLanguage].progressMessages[6];
                
                // Show completion popup if not already shown
                if (!localStorage.getItem('completionShown')) {
                    showCompletionPopup(completed);
                    localStorage.setItem('completionShown', 'true');
                }
            }
            
            completionText.textContent = progressText;
            
            // Save to localStorage
            localStorage.setItem('moonlightProgress', JSON.stringify(progress));
        }
        
        // Show completion popup with specific completed days
        function showCompletionPopup(completedDays) {
            completedDaysCount.textContent = completedDays;
            completionPopup.classList.add('show');
        }
        
        // Show night completion popup
        function showNightPopup(dayNumber) {
            completedNightNumber.textContent = dayNumber;
            nightPopup.classList.add('show');
            
            // Create stars for the popup
            const nightStars = document.getElementById('night-stars');
            nightStars.innerHTML = '';
            
            for (let i = 0; i < 50; i++) {
                const star = document.createElement('div');
                star.classList.add('night-star');
                star.style.width = `${Math.random() * 3 + 1}px`;
                star.style.height = star.style.width;
                star.style.left = `${Math.random() * 100}%`;
                star.style.top = `${Math.random() * 100}%`;
                star.style.opacity = Math.random() * 0.6 + 0.1;
                star.style.setProperty('--duration', `${Math.random() * 4 + 4}s`);
                star.style.setProperty('--delay', `${Math.random() * 5}s`);
                nightStars.appendChild(star);
            }
            
            // Play chime sound
            playChimeSound();
        }
        
        // Play chime sound for night completion
        function playChimeSound() {
            // Create audio context
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            
            // Create oscillator
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            // Configure oscillator
            oscillator.type = 'sine';
            oscillator.frequency.value = 784; // G5
            gainNode.gain.value = 0.5;
            
            // Connect nodes
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            // Play the sound
            oscillator.start();
            gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 1.5);
            
            // Stop after 1.5 seconds
            oscillator.stop(audioContext.currentTime + 1.5);
        }
        
        // Set up checkbox event listeners
        function setupCheckboxListeners() {
            challengeGrid.addEventListener('change', function(e) {
                if (e.target.classList.contains('day-checkbox')) {
                    const dayIndex = parseInt(e.target.getAttribute('data-day'));
                    progress[dayIndex] = e.target.checked;
                    updateProgress();
                    
                    // Show night completion popup when checked
                    if (e.target.checked) {
                        showNightPopup(dayIndex + 1);
                    }
                }
            });
        }
        
        // Night popup close button
        nightPopupClose.addEventListener('click', function() {
            nightPopup.classList.remove('show');
        });
        
        // Finish Challenge button
        finishBtn.addEventListener('click', function() {
            confirmationModal.classList.add('show');
        });
        
        // Confirm finish button
        confirmFinishBtn.addEventListener('click', function() {
            // Freeze the challenge
            freezeChallenge();
            
            // Hide confirmation modal
            confirmationModal.classList.remove('show');
            
            // Show completion popup
            const completed = progress.filter(Boolean).length;
            showCompletionPopup(completed);
            
            // Play success sound
            playTriumphSound();
        });
        
        // Cancel finish button
        cancelFinishBtn.addEventListener('click', function() {
            confirmationModal.classList.remove('show');
        });
        
        // New challenge button
        newChallengeBtn.addEventListener('click', function() {
            startNewChallenge();
        });
        
        // Freeze the challenge UI
        function freezeChallenge() {
            // Mark challenge as finished
            localStorage.setItem('challengeFinished', 'true');
            
            // Disable all checkboxes
            document.querySelectorAll('.day-checkbox').forEach(checkbox => {
                checkbox.disabled = true;
            });
            
            // Add finished class to all day cards
            document.querySelectorAll('.day-card').forEach(card => {
                card.classList.add('finished');
            });
            
            // Hide finish button and show new challenge button
            finishBtn.style.display = 'none';
            newChallengeBtn.style.display = 'block';
        }
        
        // Start new challenge
        function startNewChallenge() {
            // Reset progress
            progress = Array(30).fill(false);
            localStorage.setItem('moonlightProgress', JSON.stringify(progress));
            
            // Clear challenge finished flag
            localStorage.removeItem('challengeFinished');
            
            // Reset checkboxes
            document.querySelectorAll('.day-checkbox').forEach(checkbox => {
                checkbox.checked = false;
                checkbox.disabled = true;
            });
            
            // Reset day cards
            document.querySelectorAll('.day-card').forEach(card => {
                card.classList.remove('finished', 'future');
                card.classList.add('disabled');
            });
            
            // Reset progress bar
            progressFill.style.width = '0%';
            currentNight.textContent = '0';
            completionText.textContent = translations[currentLanguage].progressMessages[0];
            
            // Show finish button and hide new challenge button
            finishBtn.style.display = 'block';
            newChallengeBtn.style.display = 'none';
            
            // Show notification
            showNotification(translations[currentLanguage].newChallengeNotification, "success");
        }
        
        // Play triumph sound for challenge completion
        function playTriumphSound() {
            // Create audio context
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            
            // Create oscillators for a chord
            const osc1 = audioContext.createOscillator();
            const osc2 = audioContext.createOscillator();
            const osc3 = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            // Configure oscillators
            osc1.type = 'sine';
            osc1.frequency.value = 523.25; // C5
            osc2.type = 'sine';
            osc2.frequency.value = 659.25; // E5
            osc3.type = 'sine';
            osc3.frequency.value = 783.99; // G5
            gainNode.gain.value = 0.4;
            
            // Connect nodes
            osc1.connect(gainNode);
            osc2.connect(gainNode);
            osc3.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            // Play the sound
            osc1.start();
            osc2.start();
            osc3.start();
            gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 2);
            
            // Stop after 2 seconds
            osc1.stop(audioContext.currentTime + 2);
            osc2.stop(audioContext.currentTime + 2);
            osc3.stop(audioContext.currentTime + 2);
        }
        
        // Close completion popup
        document.getElementById('popup-close').addEventListener('click', function() {
            completionPopup.classList.remove('show');
        });
        
        // Initialize progress and card state
        updateProgress();
        updateChallengeDates();
        updateDayCardsState();
        
        // Check if challenge is already finished
        if (localStorage.getItem('challengeFinished') === 'true') {
            freezeChallenge();
        }
        
        // Scroll to top button functionality
        window.addEventListener('scroll', function() {
            if (window.scrollY > 300) {
                scrollTopBtn.classList.add('visible');
            } else {
                scrollTopBtn.classList.remove('visible');
            }
        });
        
        scrollTopBtn.addEventListener('click', function() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
        
        // Language switcher functionality
        const languageSwitcher = document.getElementById('language-switcher');
        
        function setLanguage(lang) {
            currentLanguage = lang;
            localStorage.setItem('language', lang);
            
            // Update UI direction and font
            if (lang === 'ar') {
                document.body.classList.add('arabic');
                document.body.dir = 'rtl';
            } else {
                document.body.classList.remove('arabic');
                document.body.dir = 'ltr';
            }
            
            // Update button text
            languageSwitcher.textContent = lang === 'en' ? 'AR' : 'EN';
            
            // Apply translations
            applyTranslations();
            
            // Regenerate challenge days with new language
            generateChallengeDays();
            
            // Update progress text
            updateProgress();
            
            // Show notification
            showNotification(translations[lang].languageChanged, "success");
        }
        
        function applyTranslations() {
            // Update all elements with data-key attribute
            document.querySelectorAll('[data-key]').forEach(element => {
                const key = element.getAttribute('data-key');
                let text = translations[currentLanguage][key] || '';
                
                // Handle placeholders in text
                if (key === 'progressText') {
                    const completed = progress.filter(Boolean).length;
                    const progressMsg = completionText.textContent;
                    text = text.replace('{0}', completed).replace('{1}', progressMsg);
                }
                else if (key === 'daysCompleted') {
                    const completed = progress.filter(Boolean).length;
                    text = text.replace('{0}', completed);
                }
                else if (key === 'userGreeting') {
                    const username = localStorage.getItem('moonlightUsername') || 'Traveler';
                    text = text + ' ' + username;
                }
                
                // Update element content
                if (element.tagName === 'INPUT' && element.type === 'text') {
                    element.placeholder = text;
                } else {
                    element.textContent = text;
                }
            });
            
            // Update the progress text separately
            const completed = progress.filter(Boolean).length;
            let progressMsg = '';
            if (completed === 0) {
                progressMsg = translations[currentLanguage].progressMessages[0];
            } else if (completed < 10) {
                progressMsg = translations[currentLanguage].progressMessages[1];
            } else if (completed < 20) {
                progressMsg = translations[currentLanguage].progressMessages[2];
            } else if (completed < 25) {
                progressMsg = translations[currentLanguage].progressMessages[3];
            } else if (completed < 28) {
                progressMsg = translations[currentLanguage].progressMessages[4];
            } else if (completed < 30) {
                progressMsg = translations[currentLanguage].progressMessages[5];
            } else {
                progressMsg = translations[currentLanguage].progressMessages[6];
            }
            
            document.querySelector('.progress-text').textContent = 
                translations[currentLanguage].progressText
                    .replace('{0}', completed)
                    .replace('{1}', progressMsg);
        }
        
        // Initialize language
        translations.ar.successNotification = "تم بنجاح";
        translations.ar.errorNotification = "خطأ، الرجاء المحاولة مرة أخرى";
        translations.ar.languageChanged = "تم تغيير اللغة إلى العربية";
        translations.ar.nightLabel = "الليلة";
        translations.ar.newChallengeNotification = "تم بدء تحدي جديد! قم بتعيين تاريخ البدء.";
        
        translations.en.successNotification = "Success";
        translations.en.errorNotification = "Error, please try again";
        translations.en.languageChanged = "Language changed to English";
        translations.en.nightLabel = "Night";
        translations.en.newChallengeNotification = "New challenge started! Set your start date.";
        
        // Set initial language
        setLanguage(currentLanguage);
        
        // Toggle language on button click
        languageSwitcher.addEventListener('click', function() {
            const newLang = currentLanguage === 'en' ? 'ar' : 'en';
            setLanguage(newLang);
        });
        
        // Set initial button text
        languageSwitcher.textContent = currentLanguage === 'en' ? 'AR' : 'EN';
        
        // Generate initial challenge days
        generateChallengeDays();
        setupCheckboxListeners();
    </script>
</body>
</html>